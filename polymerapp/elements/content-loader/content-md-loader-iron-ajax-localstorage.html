<link rel="import" href="../../../bower_components/pingo-iron-ajax-localstorage/pingo-iron-ajax-localstorage.html">

<dom-module id="content-md-loader-iron-ajax-localstorage">
    <template>

        <pingo-iron-ajax-localstorage id="ironAjaxLocalstorage" params="{{routeParams}}" handle-as="text" last-response="{{ajaxResponse}}"></pingo-iron-ajax-localstorage>

        <marked-element id="content"></marked-element>

    </template>
    <script>
        Polymer({
            is: "content-md-loader-iron-ajax-localstorage",
            properties: {
                ajaxResponse: {
                    type: Object,
                    observer: 'onAjaxResponse'
                },
                filePath: {
                    type: String,
                    observer: 'loadFile'
                },
                value: {
                    type: Object
                }
            },
            onAjaxResponse: function (path) {
                this.$.content.markdown = path;
            },

            loadFile: function (path) {
                if (this.filePath) {
                    this.$.ironAjaxLocalstorage.dataUrl = this.filePath;
                }
            }
        });
    </script>
</dom-module>
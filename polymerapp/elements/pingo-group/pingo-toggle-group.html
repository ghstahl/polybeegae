<link rel="import" href="../../../bower_components/polymer/polymer.html">
<link rel="import" href="../../../bower_components/iron-input/iron-input.html">
<link rel="import" href="pingo-toggle-group-validator.html">
<link rel="import" href="../../../bower_components/paper-toggle-button/paper-toggle-button.html">


<dom-module id="pingo-toggle-group">
    <style>
        :host {
            display: block;
        }
        
        paper-radio-button {
            display: block;
        }
        
        .line {
            margin-bottom: 40px;
        }
        
        .line span {
            margin-left: 24px;
        }
    </style>

    <template>
        <pingo-toggle-group-validator value=[[value]] invalid={{invalid}}></pingo-toggle-group-validator>

        <template is="dom-repeat" items="{{_toArray(value)}}" as="toggleItem">
            <div class="line">
                <paper-toggle-button checked={{toggleItem.value}}></paper-toggle-button>
                <span>{{toggleItem.name}}</span>
                <span>{{computeBooleanToString(toggleItem.value)}}</span>
            </div>
        </template>
    </template>
</dom-module>

<script>
    Polymer({
        is: 'pingo-toggle-group',

        behaviors: [Polymer.IronValidatableBehavior],

        properties: {
            value: {
                notify: true,
                type: Object
            },

            /**
             * Returns true if the value is invalid. Bind this to both the `<paper-input-container>`'s
             * and the input's `invalid` property.
             */
            invalid: {
                type: Boolean,
                value: false,
                notify: true
            },
            validator: {
                type: String,
                value: 'pingo-toggle-group-validator'
            }
        },
        computeBooleanToString: function (a) {
            return a === true ? 'true' : 'false';
        },
        _toArray: function (obj) {
            var index = 0;
            var thisElement = this;
            this._arrayData = Object.keys(obj).map(function (key) {
                var id = "item_" + index;
                ++index;
                var val = obj[key];
                val.id = id;
                return {
                    name: key,
                    value: val
                };
            });
            return this._arrayData;
        }
    });
</script>